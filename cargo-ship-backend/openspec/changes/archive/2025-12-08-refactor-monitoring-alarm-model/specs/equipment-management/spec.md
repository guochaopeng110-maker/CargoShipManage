# 设备管理能力

## ADDED Requirements

### Requirement: 设备系统层级
系统 MUST 在"设备系统"级别(如"电池装置系统"、"推进系统")而非单个组件级别管理设备。

#### Scenario: 创建设备系统
- **假设** 船舶有包含多个电池组的电池系统
- **当** 创建设备,deviceId="BATT-SYS-001"、deviceName="电池装置系统"、deviceType="动力系统"
- **那么** 设备代表整个电池系统
- **并且** 在系统级别配置监测点和阈值

#### Scenario: 按系统类型查询设备
- **假设** 注册了多个设备系统
- **当** 按 deviceType="动力系统" 筛选设备时
- **那么** 返回所有动力相关的设备系统
- **并且** 结果包括电池系统、逆变器和配电板

#### Scenario: 替换细粒度设备数据
- **假设** 现有设备记录在组件级别(如"1#电池组"、"2#电池组")
- **当** 迁移到系统级设备时
- **那么** 删除旧的组件级记录
- **并且** 创建新的系统级记录及适当的监测点

### Requirement: 设备-监测点关联
系统 MUST 根据设备类型和配置定义哪些监测点对每个设备系统有效。

#### Scenario: 为设备定义监测点
- **假设** "电池装置系统"设备
- **当** 关联有效监测点如"总电压"、"充电电流"、"最高单体温度"、"SOC"
- **那么** 这些监测点注册为该设备的有效监测点
- **并且** 时序数据和阈值只能使用这些定义的监测点

#### Scenario: 验证设备类型的监测点
- **假设** 设备类型"推进电机"有定义的监测点
- **当** 尝试为无效监测点记录数据(如电机上的"SOC")时
- **那么** 验证失败并返回设备类型不匹配错误
- **并且** 系统建议该设备的有效监测点

#### Scenario: 支持设备特定的监控配置
- **假设** 相同类型的两个设备系统
- **当** 每个设备基于安装的传感器有不同的监测点配置时
- **那么** 每个设备可以有自己的有效监测点集
- **并且** 配置是独立且灵活的


