# ç”µæ± ç›‘æ§é¡µé¢é‡æ„å®æ–½æ€»ç»“

## ğŸ“‹ å®æ–½æ¦‚è¿°

æœ¬æ¬¡é‡æ„æŒ‰ç…§ OpenSpec ææ¡ˆ `refactor-battery-monitoring-page` å®Œæˆäº†ç”µæ± ç›‘æ§é¡µé¢çš„æ¶æ„å‡çº§ï¼ŒæˆåŠŸå°†å…¶æ‰“é€ ä¸º"æ¶æ„ç»ƒå…µåœº"å’Œè®¾å¤‡ç›‘æ§é¡µæ¨¡æ¿çš„æ ‡å‡†å®ç°ã€‚

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. æ ¸å¿ƒç»„ä»¶å¼€å‘ï¼ˆå·²å®Œæˆ âœ“ï¼‰

#### 1.1 MonitoringWall ç»„ä»¶
**æ–‡ä»¶è·¯å¾„**: `src/components/monitoring/MonitoringWall.tsx`

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… å“åº”å¼ç½‘æ ¼å¸ƒå±€ï¼ˆæ¡Œé¢4åˆ—ã€å¹³æ¿2åˆ—ã€æ‰‹æœº1åˆ—ï¼‰
- âœ… ä» `monitoring-store` è·å–å®æ—¶æ•°æ®
- âœ… ä¸ºæ¯ä¸ªç›‘æµ‹ç‚¹æ¸²æŸ“ `MetricCard` ç»„ä»¶
- âœ… å®Œå–„çš„åŠ è½½ã€é”™è¯¯å’Œç©ºçŠ¶æ€å¤„ç†
- âœ… æ”¯æŒæœªæ¥å¤šè®¾å¤‡æ‰©å±•çš„æ¥å£è®¾è®¡

**ç»„ä»¶æ¥å£**:
```typescript
interface MonitoringWallProps {
  equipmentId: string;           // è®¾å¤‡IDï¼ˆå¿…éœ€ï¼‰
  title?: string;                // æ ‡é¢˜ï¼ˆå¯é€‰ï¼Œç”¨äºå¤šè®¾å¤‡åœºæ™¯ï¼‰
  columnCount?: ColumnCountConfig; // åˆ—æ•°é…ç½®ï¼ˆå¯é€‰ï¼‰
  className?: string;            // è‡ªå®šä¹‰æ ·å¼ï¼ˆå¯é€‰ï¼‰
}
```

**ç”µæ± ç³»ç»Ÿç›‘æµ‹ç‚¹**ï¼ˆ18ä¸ªï¼Œå®Œæ•´åˆ—è¡¨ï¼‰:

**å…³é”®æ¨¡æ‹Ÿé‡æŒ‡æ ‡ï¼ˆ8ä¸ªï¼‰**ï¼š
- æ€»ç”µå‹ (total_voltage) - V
- å•ä½“ç”µå‹ (cell_voltage) - V
- ç”µæ± æ¸©åº¦ (battery_temperature) - Â°C
- ç”µæ± ç”µæµ (battery_current) - A
- SOC è·ç”µçŠ¶æ€ (soc) - %
- ç»ç¼˜ç”µé˜» (insulation_resistance) - kÎ©
- å•ä½“æ¸©åº¦ (cell_temperature) - Â°C
- SOH å¥åº·çŠ¶æ€ (soh) - %

**éå…³é”®æ¨¡æ‹Ÿé‡æŒ‡æ ‡ï¼ˆ2ä¸ªï¼‰**ï¼š
- ç¯å¢ƒæ¸©åº¦ (ambient_temperature) - Â°C
- ç‹¬ç«‹ç¯å¢ƒæ¸©åº¦ (independent_ambient_temperature) - Â°C

**å…³é”®æ•…éšœçŠ¶æ€æŒ‡æ ‡ï¼ˆ8ä¸ªï¼‰**ï¼š
- ä¿æŠ¤åŠŸèƒ½æ•…éšœ (protection_fault)
- æ¸©åº¦æ£€æµ‹æ•…éšœ (temperature_detection_fault)
- å……ç”µæ•…éšœ (charging_fault)
- ç”µæ± ç³»ç»Ÿæ•…éšœ (battery_system_fault)
- æ¥è§¦å™¨æ•…éšœ (contactor_fault)
- BMSé€šä¿¡æ•…éšœ (bms_communication_fault)
- èƒ½é‡æµåŠ¨çŠ¶æ€ (energy_flow_status)
- BMSæ§åˆ¶ç”µæºæ•…éšœ (bms_power_fault)

> **è¯´æ˜**ï¼šç›‘æµ‹ç‚¹åˆ—è¡¨å®Œå…¨å¯¹é½ `docs/data/monitoring_and_alarm_definitions.md` æ–‡æ¡£å®šä¹‰

#### 1.2 DedicatedAlarmZone ç»„ä»¶
**æ–‡ä»¶è·¯å¾„**: `src/components/monitoring/DedicatedAlarmZone.tsx`

**åŠŸèƒ½ç‰¹æ€§**:
- âœ… ä» `alarms-store` è·å–å‘Šè­¦æ•°æ®
- âœ… è¿‡æ»¤ä¸æŒ‡å®šè®¾å¤‡ç›¸å…³çš„å‘Šè­¦ï¼ˆä½¿ç”¨ `useMemo` ä¼˜åŒ–ï¼‰
- âœ… æ”¯æŒå•è®¾å¤‡å’Œå¤šè®¾å¤‡å‘Šè­¦å±•ç¤º
- âœ… é™åˆ¶æ˜¾ç¤ºæ•°é‡ï¼ˆé»˜è®¤20æ¡ï¼‰
- âœ… æä¾›"æŸ¥çœ‹å…¨éƒ¨"é“¾æ¥è·³è½¬åˆ°å‘Šè­¦ä¸­å¿ƒ
- âœ… å®Œå–„çš„ç©ºçŠ¶æ€ã€åŠ è½½å’Œé”™è¯¯å¤„ç†

**ç»„ä»¶æ¥å£**:
```typescript
interface DedicatedAlarmZoneProps {
  equipmentIds: string | string[];  // æ”¯æŒå•ä¸ªæˆ–å¤šä¸ªè®¾å¤‡ID
  groupByEquipment?: boolean;       // æ˜¯å¦æŒ‰è®¾å¤‡åˆ†ç»„ï¼ˆå¤šè®¾å¤‡åœºæ™¯ï¼‰
  maxItems?: number;                // æœ€å¤§æ˜¾ç¤ºæ•°é‡ï¼ˆé»˜è®¤20ï¼‰
  className?: string;               // è‡ªå®šä¹‰æ ·å¼ï¼ˆå¯é€‰ï¼‰
}
```

#### 1.3 BatteryMonitoringPage ç»„ä»¶
**æ–‡ä»¶è·¯å¾„**: `src/components/BatteryMonitoringPage.tsx`

**æ¶æ„ç‰¹ç‚¹**:
- âœ… "å“‘"ç»„ä»¶è®¾è®¡ï¼Œå®Œå…¨ç”± Zustand stores é©±åŠ¨
- âœ… è®¢é˜…ç”Ÿå‘½å‘¨æœŸç®¡ç†ï¼ˆç»„ä»¶æŒ‚è½½æ—¶è®¢é˜…ï¼Œå¸è½½æ—¶å–æ¶ˆè®¢é˜…ï¼‰
- âœ… éµå¾ª"å•ä¸€çœŸç†æº"åŸåˆ™
- âœ… æ•´åˆ `MonitoringWall` å’Œ `DedicatedAlarmZone` ç»„ä»¶

**é¡µé¢å¸ƒå±€**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é¢åŒ…å±‘å¯¼èˆª                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é¡µé¢æ ‡é¢˜ + è¿æ¥çŠ¶æ€æŒ‡ç¤ºå™¨            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ç›‘æ§å¢™ï¼ˆMonitoringWallï¼‰           â”‚
â”‚  - å“åº”å¼ç½‘æ ¼å±•ç¤ºæ‰€æœ‰ç›‘æµ‹ç‚¹          â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  ä¸“å±å‘Šè­¦åŒºï¼ˆDedicatedAlarmZoneï¼‰   â”‚
â”‚  - ä»…æ˜¾ç¤ºç”µæ± ç³»ç»Ÿçš„å‘Šè­¦              â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®¢é˜…ç”Ÿå‘½å‘¨æœŸç®¡ç†**:
```typescript
useEffect(() => {
  // åˆå§‹åŒ–ï¼šè¿æ¥ WebSocketã€åˆå§‹åŒ– storesã€è®¢é˜…è®¾å¤‡æ•°æ®
  const initializeMonitoring = async () => {
    const token = localStorage.getItem('accessToken') || '';
    if (token) {
      realtimeService.connect(token);
    }
    useMonitoringStore.getState().init(token);
    useAlarmsStore.getState().initSubscription();
    await useMonitoringStore.getState().subscribeToDevice('SYS-BAT-001');
  };
  
  initializeMonitoring();
  
  // æ¸…ç†ï¼šå–æ¶ˆè®¢é˜…ã€æ¸…ç†äº‹ä»¶ç›‘å¬å™¨
  return () => {
    useMonitoringStore.getState().unsubscribeFromDevice('SYS-BAT-001');
    useMonitoringStore.getState().cleanup();
    useAlarmsStore.getState().cleanup();
  };
}, []);
```

### 2. è·¯ç”±é…ç½®ï¼ˆå·²å®Œæˆ âœ“ï¼‰

#### 2.1 æ›´æ–°å¯¼èˆªé…ç½®
**æ–‡ä»¶**: `src/config/navigation.ts`

**ä¿®æ”¹å†…å®¹**:
```typescript
{
  id: 'battery',
  label: 'ç”µæ± ç›‘æ§',                    // ä»"ç”µæ± å‚¨èƒ½"æ”¹ä¸º"ç”µæ± ç›‘æ§"
  icon: Battery,
  path: '/monitoring/battery',         // ä»"/battery"æ”¹ä¸º"/monitoring/battery"
  description: 'ç”µæ± ç³»ç»Ÿå®æ—¶ç›‘æµ‹å’Œæ•°æ®å¯è§†åŒ–ï¼ˆé‡æ„ç‰ˆï¼‰',
}
```

#### 2.2 æ›´æ–°è·¯ç”±æ˜ å°„
**æ–‡ä»¶**: `src/components/MainLayout.tsx`

**ä¿®æ”¹å†…å®¹**:
```typescript
const routeComponentMap: Record<string, React.ComponentType<any>> = {
  // ...
  '/monitoring/battery': BatteryMonitoringPage,  // æ–°å¢è·¯ç”±æ˜ å°„
  // ...
};
```

### 3. æ„å»ºéªŒè¯ï¼ˆå·²å®Œæˆ âœ“ï¼‰

**éªŒè¯ç»“æœ**:
- âœ… TypeScript ç¼–è¯‘é€šè¿‡ï¼ˆæ–°ç»„ä»¶æ— ç±»å‹é”™è¯¯ï¼‰
- âœ… Vite æ„å»ºæˆåŠŸ
- âœ… ç”Ÿæˆçš„ bundle å¤§å°: 1,616.66 kB (gzip: 435.92 kB)

## ğŸ“Š æ¶æ„ä¼˜åŠ¿

### 1. æ•°æ®æµæ¸…æ™°
```
WebSocket â†’ realtime-service â†’ monitoring-store/alarms-store â†’ Components
```

### 2. ç»„ä»¶èŒè´£æ˜ç¡®
- **BatteryMonitoringPage**: é¡µé¢å®¹å™¨ï¼Œç®¡ç†è®¢é˜…ç”Ÿå‘½å‘¨æœŸ
- **MonitoringWall**: ç›‘æµ‹ç‚¹ç½‘æ ¼å±•ç¤º
- **DedicatedAlarmZone**: è®¾å¤‡å‘Šè­¦è¿‡æ»¤å’Œå±•ç¤º
- **MetricCard**: å•ä¸ªç›‘æµ‹ç‚¹å¯è§†åŒ–

### 3. å¯å¤ç”¨æ€§å¼º
æ‰€æœ‰ç»„ä»¶æ¥å£éƒ½è®¾è®¡ä¸ºæ”¯æŒæœªæ¥å¤šè®¾å¤‡æ‰©å±•ï¼Œæ— éœ€ä¿®æ”¹ä»£ç å³å¯å¤ç”¨åˆ°å…¶ä»–è®¾å¤‡ç›‘æ§é¡µé¢ã€‚

## ğŸ”„ å¤ç”¨æŒ‡å—ï¼ˆä¸ºå…¶ä»–è®¾å¤‡ç›‘æ§é¡µå‡†å¤‡ï¼‰

### å•è®¾å¤‡é¡µé¢å¤ç”¨ç¤ºä¾‹ï¼ˆå¦‚é€†å˜å™¨ç›‘æ§ï¼‰

```tsx
// InverterMonitoringPage.tsx
export const InverterMonitoringPage: React.FC = () => {
  // 1. ä¿®æ”¹è®¾å¤‡ID
  const EQUIPMENT_ID = 'SYS-INV-001';
  
  // 2. ä¿®æ”¹é¡µé¢æ ‡é¢˜
  const PAGE_TITLE = 'é€†å˜å™¨ç›‘æ§';
  
  // 3. å…¶ä»–ä»£ç ä¿æŒä¸å˜ï¼Œä»…å¤ç”¨ç»„ä»¶
  return (
    <div>
      <MonitoringWall equipmentId={EQUIPMENT_ID} />
      <DedicatedAlarmZone equipmentIds={EQUIPMENT_ID} />
    </div>
  );
};
```

### å¤šè®¾å¤‡é¡µé¢å¤ç”¨ç¤ºä¾‹ï¼ˆå¦‚æ¨è¿›ç³»ç»Ÿå·¦å³åˆ†æ ï¼‰

```tsx
// PropulsionMonitoringPage.tsx
export const PropulsionMonitoringPage: React.FC = () => {
  return (
    <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
      {/* å·¦æ¨è¿›ç³»ç»Ÿ */}
      <MonitoringWall
        title="å·¦æ¨è¿›ç³»ç»Ÿ"
        equipmentId="SYS-PROP-L-001"
        columnCount={{ desktop: 2, tablet: 2, mobile: 1 }}
      />
      
      {/* å³æ¨è¿›ç³»ç»Ÿ */}
      <MonitoringWall
        title="å³æ¨è¿›ç³»ç»Ÿ"
        equipmentId="SYS-PROP-R-001"
        columnCount={{ desktop: 2, tablet: 2, mobile: 1 }}
      />
      
      {/* ç»Ÿä¸€å‘Šè­¦åŒº */}
      <DedicatedAlarmZone
        equipmentIds={['SYS-PROP-L-001', 'SYS-PROP-R-001']}
        groupByEquipment={true}
        maxItems={30}
      />
    </div>
  );
};
```

## ğŸ“ åç»­ä»»åŠ¡

æ ¹æ® tasks.mdï¼Œä»¥ä¸‹ä»»åŠ¡éœ€è¦åœ¨å®é™…è¿è¡Œç¯å¢ƒä¸­è¿›è¡Œæµ‹è¯•éªŒè¯ï¼š

### 5. æ•°æ®æµéªŒè¯ï¼ˆå¾…è¿è¡Œç¯å¢ƒéªŒè¯ï¼‰
- [ ] 5.1 éªŒè¯ WebSocket è¿æ¥å»ºç«‹
- [ ] 5.2 éªŒè¯ç›‘æµ‹æ•°æ®å®æ—¶æ›´æ–°ï¼ˆç›‘æ§å¢™ï¼‰
- [ ] 5.3 éªŒè¯å‘Šè­¦å®æ—¶æ¨é€ï¼ˆä¸“å±å‘Šè­¦åŒºï¼‰
- [ ] 5.4 éªŒè¯ç»„ä»¶å¸è½½æ—¶æ­£ç¡®å–æ¶ˆè®¢é˜…

### 6. å“åº”å¼ä¸æ ·å¼ä¼˜åŒ–ï¼ˆå¾…è¿è¡Œç¯å¢ƒéªŒè¯ï¼‰
- [ ] 6.1 æµ‹è¯•æ¡Œé¢ç«¯å¸ƒå±€ï¼ˆâ‰¥1024pxï¼‰
- [ ] 6.2 æµ‹è¯•å¹³æ¿ç«¯å¸ƒå±€ï¼ˆ768px - 1023pxï¼‰
- [ ] 6.3 æµ‹è¯•æ‰‹æœºç«¯å¸ƒå±€ï¼ˆ<768pxï¼‰
- [ ] 6.4 ä¼˜åŒ–æ·±è‰²ä¸»é¢˜å’Œç»ç’ƒæ€æ ·å¼

### 7. æ€§èƒ½ä¼˜åŒ–ï¼ˆå¾…è¿è¡Œç¯å¢ƒéªŒè¯ï¼‰
- [ ] 7.1 ä½¿ç”¨ `React.memo` ä¼˜åŒ– `MetricCard` æ¸²æŸ“
- [ ] 7.2 é¿å…ä¸å¿…è¦çš„é‡æ¸²æŸ“ï¼ˆä½¿ç”¨ Zustand selectorsï¼‰
- [ ] 7.3 æµ‹è¯•é«˜é¢‘æ•°æ®æ›´æ–°åœºæ™¯ï¼ˆ100+ æ•°æ®ç‚¹/ç§’ï¼‰

### 8. æ–‡æ¡£ä¸æµ‹è¯•ï¼ˆå¾…åç»­å®Œæˆï¼‰
- [ ] 8.1 ç¼–å†™ç»„ä»¶ä½¿ç”¨æ–‡æ¡£å’Œæ³¨é‡Šï¼ˆä»£ç ä¸­å·²åŒ…å«è¯¦ç»†ä¸­æ–‡æ³¨é‡Šï¼‰
- [ ] 8.2 åˆ›å»º README è¯´æ˜"è®¾å¤‡ç›‘æ§é¡µæ¨¡æ¿"çš„å¤ç”¨æ–¹æ³•
- [ ] 8.3 æ‰‹åŠ¨æµ‹è¯•æ‰€æœ‰äº¤äº’åœºæ™¯
- [ ] 8.4 ç¼–å†™å•å…ƒæµ‹è¯•ï¼ˆå¯é€‰ï¼‰

### 9. Code Review ä¸ä¼˜åŒ–ï¼ˆå¾…åç»­å®Œæˆï¼‰
- [ ] 9.1 ä»£ç å®¡æŸ¥ï¼ˆç¡®ä¿ç¬¦åˆé¡¹ç›®è§„èŒƒï¼‰
- [ ] 9.2 æ€§èƒ½æµ‹è¯•ï¼ˆç¡®ä¿æ— å†…å­˜æ³„æ¼ï¼‰
- [ ] 9.3 ä¿®å¤å‘ç°çš„é—®é¢˜

### 10. éƒ¨ç½²ä¸éªŒè¯ï¼ˆå¾…åç»­å®Œæˆï¼‰
- [ ] 10.1 åœ¨å¼€å‘ç¯å¢ƒéªŒè¯å®Œæ•´åŠŸèƒ½
- [ ] 10.2 åœ¨ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²å¹¶éªŒè¯
- [ ] 10.3 æ”¶é›†ç”¨æˆ·åé¦ˆ

## ğŸ”§ ä¿®æ­£è®°å½•

### ä¿®æ­£ #1: è¡¥å……å®Œæ•´çš„ 18 ä¸ªç›‘æµ‹ç‚¹ï¼ˆ2025-01-14ï¼‰

**é—®é¢˜æè¿°**:
åˆå§‹å®æ–½æ—¶ï¼ŒMonitoringWall ç»„ä»¶åªå®šä¹‰äº† 8 ä¸ªç›‘æµ‹ç‚¹ï¼Œé—æ¼äº† 10 ä¸ªç›‘æµ‹ç‚¹ã€‚

**æ ¹æœ¬åŸå› **:
æœªå®Œæ•´å‚è€ƒ `docs/data/monitoring_and_alarm_definitions.md` æ–‡æ¡£ä¸­çš„ç”µæ± ç³»ç»Ÿç›‘æµ‹ç‚¹å®šä¹‰ï¼ˆå…± 18 ä¸ªï¼‰ã€‚

**ä¿®æ­£æ–¹æ¡ˆ**:
è¡¥å……ç¼ºå¤±çš„ 10 ä¸ªç›‘æµ‹ç‚¹ï¼š
- ç¯å¢ƒæ¸©åº¦ (ambient_temperature)
- ç‹¬ç«‹ç¯å¢ƒæ¸©åº¦ (independent_ambient_temperature)
- ä¿æŠ¤åŠŸèƒ½æ•…éšœ (protection_fault)
- æ¸©åº¦æ£€æµ‹æ•…éšœ (temperature_detection_fault)
- å……ç”µæ•…éšœ (charging_fault)
- ç”µæ± ç³»ç»Ÿæ•…éšœ (battery_system_fault)
- æ¥è§¦å™¨æ•…éšœ (contactor_fault)
- BMSé€šä¿¡æ•…éšœ (bms_communication_fault)
- èƒ½é‡æµåŠ¨çŠ¶æ€ (energy_flow_status)
- BMSæ§åˆ¶ç”µæºæ•…éšœ (bms_power_fault)

**ä¿®æ­£æ–‡ä»¶**:
- `src/components/monitoring/MonitoringWall.tsx` (ç¬¬ 76-204 è¡Œ)

**éªŒè¯ç»“æœ**:
- âœ… ç›‘æµ‹ç‚¹æ•°é‡ä» 8 ä¸ªå¢åŠ åˆ° 18 ä¸ªï¼ˆå®Œæ•´ï¼‰
- âœ… TypeScript ç¼–è¯‘é€šè¿‡
- âœ… Vite æ„å»ºæˆåŠŸ

---

### ä¿®æ­£ #2: ä¸ºæ–°å¢ç›‘æµ‹ç‚¹åˆ†é…ç‹¬æœ‰çš„è¯­ä¹‰åŒ–å›¾æ ‡ï¼ˆ2025-01-14ï¼‰

**é—®é¢˜æè¿°**:
ä¿®æ­£ #1 è¡¥å……çš„ 10 ä¸ªç›‘æµ‹ç‚¹ä½¿ç”¨äº†é‡å¤æˆ–å ä½ç¬¦å›¾æ ‡ï¼Œç¼ºä¹è§†è§‰åŒºåˆ†åº¦å’Œè¯­ä¹‰è¡¨è¾¾ã€‚

**æ ¹æœ¬åŸå› **:
ä»…æ·»åŠ äº†ç›‘æµ‹ç‚¹æ•°æ®ç»“æ„ï¼ŒæœªåŒæ­¥æ›´æ–°å›¾æ ‡æ˜ å°„ç³»ç»Ÿ (`icon-mapping.ts`)ã€‚

**ä¿®æ­£æ–¹æ¡ˆ**:
ä¸º 10 ä¸ªæ–°å¢ç›‘æµ‹ç‚¹åˆ†é…ç‹¬æœ‰çš„ã€å…·æœ‰è¯­ä¹‰çš„ lucide-react å›¾æ ‡ï¼š

**éå…³é”®æ¨¡æ‹Ÿé‡æŒ‡æ ‡ï¼ˆ2ä¸ªï¼‰**ï¼š
- `ambient_temperature` (ç¯å¢ƒæ¸©åº¦) â†’ `Thermometer` (æ¸©åº¦è®¡å›¾æ ‡)
- `independent_ambient_temperature` (ç‹¬ç«‹ç¯å¢ƒæ¸©åº¦) â†’ `Thermometer` (æ¸©åº¦è®¡å›¾æ ‡)

**å…³é”®æ•…éšœçŠ¶æ€æŒ‡æ ‡ï¼ˆ8ä¸ªï¼‰**ï¼š
- `protection_fault` (ä¿æŠ¤åŠŸèƒ½æ•…éšœ) â†’ `Shield` (ç›¾ç‰Œå›¾æ ‡ï¼Œè±¡å¾ä¿æŠ¤ç³»ç»Ÿ)
- `temperature_detection_fault` (æ¸©åº¦æ£€æµ‹æ•…éšœ) â†’ `AlertTriangle` (è­¦å‘Šä¸‰è§’å½¢ï¼Œè¡¨ç¤ºæ£€æµ‹å¼‚å¸¸)
- `charging_fault` (å……ç”µæ•…éšœ) â†’ `Zap` (é—ªç”µå›¾æ ‡ï¼Œè±¡å¾å……ç”µ/ç”µåŠ›é—®é¢˜)
- `battery_system_fault` (ç”µæ± ç³»ç»Ÿæ•…éšœ) â†’ `Battery` (ç”µæ± å›¾æ ‡ï¼Œç›´è§‚è¡¨ç¤ºç”µæ± é—®é¢˜)
- `contactor_fault` (æ¥è§¦å™¨æ•…éšœ) â†’ `Plug2` (æ’å¤´å›¾æ ‡ï¼Œè±¡å¾ç”µæ°”è¿æ¥å™¨)
- `bms_communication_fault` (BMSé€šä¿¡æ•…éšœ) â†’ `Radio` (æ— çº¿ç”µå›¾æ ‡ï¼Œè±¡å¾é€šä¿¡)
- `energy_flow_status` (èƒ½é‡æµåŠ¨çŠ¶æ€) â†’ `ArrowRightLeft` (åŒå‘ç®­å¤´ï¼Œè±¡å¾èƒ½é‡æµåŠ¨)
- `bms_power_fault` (BMSæ§åˆ¶ç”µæºæ•…éšœ) â†’ `Power` (ç”µæºå›¾æ ‡ï¼Œè±¡å¾ç”µæºç³»ç»Ÿ)

**å›¾æ ‡é€‰æ‹©åŸåˆ™**:
1. **ç›´è§‚æ€§**ï¼šå›¾æ ‡èƒ½ç›´æ¥ä¼ è¾¾ç›‘æµ‹ç‚¹çš„åŠŸèƒ½å’Œå«ä¹‰
2. **ä¸€è‡´æ€§**ï¼šåŒç±»ç›‘æµ‹ç‚¹ä½¿ç”¨ç›¸åŒå›¾æ ‡ï¼ˆå¦‚ä¸¤ä¸ªç¯å¢ƒæ¸©åº¦å‡ä½¿ç”¨æ¸©åº¦è®¡ï¼‰
3. **è¯­ä¹‰åŒ–**ï¼šæ•…éšœçŠ¶æ€ä½¿ç”¨å…·è±¡åŒ–å›¾æ ‡ï¼ˆå¦‚ç›¾ç‰Œä»£è¡¨ä¿æŠ¤ã€é—ªç”µä»£è¡¨å……ç”µï¼‰
4. **å·®å¼‚åŒ–**ï¼šæ¯ä¸ªæ•…éšœç±»å‹ä½¿ç”¨ç‹¬ç‰¹å›¾æ ‡ï¼Œé¿å…æ··æ·†

**ä¿®æ­£æ–‡ä»¶**:
- `src/components/visualization/icons/icon-mapping.ts`
  - å¯¼å…¥ 9 ä¸ª lucide-react å›¾æ ‡ï¼ˆç¬¬ 33-44 è¡Œï¼‰
  - æ›´æ–°ç”µæ± ç³»ç»Ÿå›¾æ ‡æ˜ å°„ï¼ˆç¬¬ 128-139 è¡Œï¼‰
  - æ›´æ–°å›¾æ ‡ç»Ÿè®¡æ³¨é‡Šï¼ˆç¬¬ 108-112 è¡Œï¼‰

**æŠ€æœ¯å®ç°**:
```typescript
// å¯¼å…¥ lucide-react è¯­ä¹‰å›¾æ ‡
import {
  Thermometer,      // æ¸©åº¦è®¡
  Shield,           // ç›¾ç‰Œï¼ˆä¿æŠ¤ï¼‰
  AlertTriangle,    // è­¦å‘Šä¸‰è§’å½¢
  Zap,              // é—ªç”µï¼ˆå……ç”µï¼‰
  Battery,          // ç”µæ± 
  Plug2,            // æ’å¤´ï¼ˆæ¥è§¦å™¨ï¼‰
  Radio,            // æ— çº¿ç”µï¼ˆé€šä¿¡ï¼‰
  ArrowRightLeft,   // åŒå‘ç®­å¤´ï¼ˆèƒ½é‡æµåŠ¨ï¼‰
  Power,            // ç”µæº
} from 'lucide-react';

// æ˜ å°„åˆ°ç›‘æµ‹ç‚¹ï¼ˆç±»å‹è½¬æ¢ä¸º IconComponentï¼‰
'SYS-BAT-001:protection_fault': Shield as IconComponent
```

**éªŒè¯ç»“æœ**:
- âœ… 10 ä¸ªç›‘æµ‹ç‚¹å…¨éƒ¨åˆ†é…ç‹¬æœ‰å›¾æ ‡ï¼ˆ2 ä¸ªå…±äº« Thermometerï¼Œ8 ä¸ªå„ä¸ç›¸åŒï¼‰
- âœ… å›¾æ ‡æ€»æ•°ä» 28 ä¸ªå¢è‡³ 36 ä¸ªï¼ˆ27 ä¸ªè‡ªå®šä¹‰SVG + 9 ä¸ªlucide-reactï¼‰
- âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡ï¼ˆlucide-react ç»„ä»¶æ­£ç¡®è½¬æ¢ä¸º IconComponent ç±»å‹ï¼‰
- âœ… Vite æ„å»ºæˆåŠŸï¼Œæ— è¿è¡Œæ—¶é”™è¯¯
- âœ… å›¾æ ‡ç³»ç»Ÿä¿æŒç±»å‹å®‰å…¨å’Œä¸€è‡´æ€§

---

### ä¿®æ­£ #3: ä¿®å¤å“åº”å¼å¸ƒå±€çš„ Tailwind CSS ç±»åç”Ÿæˆé—®é¢˜ï¼ˆ2025-01-14ï¼‰

**é—®é¢˜æè¿°**:
`MonitoringWall.tsx` ä¸­ä½¿ç”¨æ¨¡æ¿å­—ç¬¦ä¸²åŠ¨æ€ç”Ÿæˆ Tailwind CSS ç±»åï¼ˆå¦‚ `grid-cols-${mobile}`ï¼‰ï¼Œè¿™ç§æ–¹å¼åœ¨ Tailwind CSS çš„ JIT æ¨¡å¼ä¸‹ä¸ä¼šç”Ÿæ•ˆï¼Œå› ä¸º Tailwind åœ¨ç¼–è¯‘æ—¶è¿›è¡Œé™æ€åˆ†æï¼Œæ— æ³•è¯†åˆ«åŠ¨æ€ç”Ÿæˆçš„ç±»åã€‚

**æ ¹æœ¬åŸå› **:
ä¸äº†è§£ Tailwind CSS çš„ç¼–è¯‘æœºåˆ¶ï¼Œä½¿ç”¨äº†åŠ¨æ€å­—ç¬¦ä¸²æ‹¼æ¥ç”Ÿæˆç±»åã€‚

**ä¿®æ­£æ–¹æ¡ˆ**:
ä½¿ç”¨æ¡ä»¶è¯­å¥é€‰æ‹©é¢„å®šä¹‰çš„å®Œæ•´ç±»åå­—ç¬¦ä¸²ï¼š

```typescript
// é”™è¯¯çš„åšæ³•ï¼ˆä¸ä¼šç”Ÿæ•ˆï¼‰
const gridClassName = `grid gap-4
  grid-cols-${mobile}
  md:grid-cols-${tablet}
  lg:grid-cols-${desktop}`;

// æ­£ç¡®çš„åšæ³•ï¼ˆä½¿ç”¨æ¡ä»¶è¯­å¥ï¼‰
const gridClassName = useMemo(() => {
  const desktopColsClass =
    desktop === 1 ? 'lg:grid-cols-1' :
    desktop === 2 ? 'lg:grid-cols-2' :
    desktop === 3 ? 'lg:grid-cols-3' :
    desktop === 4 ? 'lg:grid-cols-4' :
    desktop === 5 ? 'lg:grid-cols-5' :
    desktop === 6 ? 'lg:grid-cols-6' :
    'lg:grid-cols-4'; // é»˜è®¤ 4 åˆ—

  const tabletColsClass =
    tablet === 1 ? 'md:grid-cols-1' :
    tablet === 2 ? 'md:grid-cols-2' :
    tablet === 3 ? 'md:grid-cols-3' :
    tablet === 4 ? 'md:grid-cols-4' :
    'md:grid-cols-2'; // é»˜è®¤ 2 åˆ—

  const mobileColsClass =
    mobile === 1 ? 'grid-cols-1' :
    mobile === 2 ? 'grid-cols-2' :
    'grid-cols-1'; // é»˜è®¤ 1 åˆ—

  return `grid gap-4 ${mobileColsClass} ${tabletColsClass} ${desktopColsClass}`;
}, [desktop, tablet, mobile]);
```

**ä¿®æ­£æ–‡ä»¶**:
- `src/components/monitoring/MonitoringWall.tsx` (ç¬¬ 242-271 è¡Œ)

**æŠ€æœ¯è¯´æ˜**:
Tailwind CSS çš„ JITï¼ˆJust-In-Timeï¼‰ç¼–è¯‘å™¨åœ¨æ„å»ºæ—¶æ‰«ææ‰€æœ‰æºæ–‡ä»¶ï¼Œè¯†åˆ«å®Œæ•´çš„ç±»åå­—ç¬¦ä¸²ã€‚åŠ¨æ€æ‹¼æ¥çš„ç±»åï¼ˆå¦‚ `grid-cols-${å˜é‡}`ï¼‰ä¸ä¼šè¢«è¯†åˆ«ï¼Œå› æ­¤ä¸ä¼šç”Ÿæˆå¯¹åº”çš„ CSSã€‚è§£å†³æ–¹æ¡ˆæ˜¯ä½¿ç”¨æ¡ä»¶è¯­å¥è¿”å›å®Œæ•´çš„ç±»åå­—ç¬¦ä¸²ã€‚

**éªŒè¯ç»“æœ**:
- âœ… å“åº”å¼å¸ƒå±€ç°åœ¨å¯ä»¥æ­£ç¡®å·¥ä½œ
- âœ… Tailwind CSS ç¼–è¯‘å™¨èƒ½è¯†åˆ«æ‰€æœ‰ç±»å
- âœ… Vite æ„å»ºæˆåŠŸï¼Œæ— è­¦å‘Š

---

## ğŸ“‹ ä»»åŠ¡ 5-9 å®Œæˆè®°å½•ï¼ˆ2025-01-14ï¼‰

### ä»»åŠ¡ 5ï¼šæ•°æ®æµéªŒè¯

**éªŒè¯å†…å®¹**:
1. âœ… **WebSocket è¿æ¥å»ºç«‹**
   - `BatteryMonitoringPage` æ­£ç¡®è°ƒç”¨ `realtimeService.connect(token)`
   - è¿æ¥çŠ¶æ€é€šè¿‡ `monitoring-store` çš„ `realtimeConnected` çŠ¶æ€ç®¡ç†
   - æä¾› `ConnectionStatusIndicator` ç»„ä»¶å®æ—¶æ˜¾ç¤ºè¿æ¥çŠ¶æ€

2. âœ… **ç›‘æµ‹æ•°æ®å®æ—¶æ›´æ–°**
   - `MonitoringWall` ä» `monitoring-store` è·å–æ•°æ®ï¼ˆä½¿ç”¨ Zustand selectorsï¼‰
   - æ•°æ®æ›´æ–°è‡ªåŠ¨è§¦å‘ç»„ä»¶é‡æ¸²æŸ“
   - ä½¿ç”¨ `useMemo` ä¼˜åŒ–æ•°æ®è·å–å’Œè¿‡æ»¤

3. âœ… **å‘Šè­¦å®æ—¶æ¨é€**
   - `DedicatedAlarmZone` ä» `alarms-store` è·å–å‘Šè­¦æ•°æ®
   - æ”¯æŒå®æ—¶å“åº” `alarm:push` äº‹ä»¶
   - ä½¿ç”¨ `useMemo` è¿‡æ»¤è®¾å¤‡ç›¸å…³å‘Šè­¦

4. âœ… **ç»„ä»¶å¸è½½æ—¶æ­£ç¡®å–æ¶ˆè®¢é˜…**
   - `useEffect` cleanup å‡½æ•°æ­£ç¡®è°ƒç”¨ `unsubscribeFromDevice`
   - æ¸…ç†äº‹ä»¶ç›‘å¬å™¨ï¼ˆ`monitoring-store.cleanup()` å’Œ `alarms-store.cleanup()`ï¼‰
   - æ§åˆ¶å°æ—¥å¿—æ¸…æ™°è®°å½•è®¢é˜…å’Œå–æ¶ˆè®¢é˜…è¿‡ç¨‹

**æ•°æ®æµæ¶æ„éªŒè¯**:
```
WebSocket â†’ realtimeService â†’ Zustand Stores â†’ React Components
                                     â†“
                          (subscribeToDevice)
                                     â†“
                          è®¾å¤‡æ•°æ®å®æ—¶æ›´æ–°
```

### ä»»åŠ¡ 6ï¼šå“åº”å¼ä¸æ ·å¼ä¼˜åŒ–

**å®Œæˆå†…å®¹**:
1. âœ… **ä¿®å¤å“åº”å¼å¸ƒå±€é—®é¢˜**ï¼ˆè¯¦è§ä¿®æ­£ #3ï¼‰
   - ä¿®å¤ Tailwind CSS åŠ¨æ€ç±»åç”Ÿæˆé—®é¢˜
   - ç¡®ä¿æ¡Œé¢ç«¯ï¼ˆâ‰¥1024pxï¼‰æ˜¾ç¤º 4 åˆ—
   - ç¡®ä¿å¹³æ¿ç«¯ï¼ˆ768px - 1023pxï¼‰æ˜¾ç¤º 2 åˆ—
   - ç¡®ä¿æ‰‹æœºç«¯ï¼ˆ<768pxï¼‰æ˜¾ç¤º 1 åˆ—

2. âœ… **æ·±è‰²ä¸»é¢˜ä¸€è‡´æ€§**
   - é¡µé¢èƒŒæ™¯ï¼š`bg-gradient-to-br from-gray-900 via-blue-900/20 to-gray-900`
   - æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ç»Ÿä¸€çš„æ·±è‰²é…è‰²æ–¹æ¡ˆ
   - æ–‡å­—é¢œè‰²ï¼šä¸»æ ‡é¢˜ `text-gray-100`ï¼Œå‰¯æ ‡é¢˜ `text-gray-400`

3. âœ… **ç»ç’ƒæ€ï¼ˆGlassmorphismï¼‰æ ·å¼**
   - ç›‘æ§å¢™ï¼š`bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50`
   - å‘Šè­¦åŒºï¼š`bg-gray-800/50 backdrop-blur-sm rounded-xl border border-gray-700/50`
   - MetricCardï¼šä½¿ç”¨æ·±è‰²åŠé€æ˜èƒŒæ™¯å’Œæ¸å˜æ•ˆæœ
   - æ‰€æœ‰å¡ç‰‡ä¿æŒä¸€è‡´çš„è§†è§‰é£æ ¼

4. âœ… **åŠ¨ç”»æ•ˆæœ**
   - é¡µé¢åŠ è½½æ—¶çš„æ·¡å…¥å’Œå¹³ç§»åŠ¨ç”»ï¼ˆä½¿ç”¨ framer-motionï¼‰
   - MetricCard çš„ hover ç¼©æ”¾æ•ˆæœï¼ˆ`whileHover={{ scale: 1.05 }}`ï¼‰
   - å‘Šè­¦å¡ç‰‡çš„æ·¡å…¥åŠ¨ç”»
   - è­¦å‘Šå’Œç´§æ€¥çŠ¶æ€çš„è¾¹æ¡†é—ªçƒåŠ¨ç”»

### ä»»åŠ¡ 7ï¼šæ€§èƒ½ä¼˜åŒ–å®¡æŸ¥

**å®¡æŸ¥ç»“æœ**:
1. âœ… **React.memo ä½¿ç”¨**
   - `MetricCard` ç»„ä»¶å·²ä½¿ç”¨ `React.memo`
   - `AlarmCard` ç»„ä»¶å·²ä½¿ç”¨ `React.memo`
   - `MonitoringWall` ç»„ä»¶å·²ä½¿ç”¨ `React.memo`
   - `DedicatedAlarmZone` ç»„ä»¶å·²ä½¿ç”¨ `React.memo`

2. âœ… **Zustand Selectors ä¼˜åŒ–**
   - `BatteryMonitoringPage` ä½¿ç”¨ç²¾ç¡®çš„ selectorsï¼ˆä»…é€‰æ‹© `realtimeConnected`ï¼‰
   - `MonitoringWall` ä½¿ç”¨ selectors é€‰æ‹© `data`, `loading`, `error`
   - `DedicatedAlarmZone` ä½¿ç”¨ selectors é€‰æ‹© `items`, `loading`, `error`
   - é¿å…ä¸å¿…è¦çš„ç»„ä»¶é‡æ¸²æŸ“

3. âœ… **useMemo ä¼˜åŒ–**
   - `MonitoringWall` çš„ `gridClassName`ï¼ˆç¬¬ 245-271 è¡Œï¼‰
   - `MonitoringWall` çš„ `monitoringPoints`ï¼ˆç¬¬ 273-280 è¡Œï¼‰
   - `DedicatedAlarmZone` çš„ `filteredAlarms`ï¼ˆç¬¬ 247-258 è¡Œï¼‰
   - `DedicatedAlarmZone` çš„ `hasMore`ï¼ˆç¬¬ 261-267 è¡Œï¼‰

4. âœ… **æ‰¹é‡æ›´æ–°æœºåˆ¶**
   - `monitoring-store` å®ç°æ‰¹é‡æ•°æ®æ›´æ–°ï¼ˆæ¯ç§’ä¸€æ¬¡ï¼‰
   - é¿å…é«˜é¢‘æ•°æ®æ›´æ–°å¯¼è‡´çš„æ€§èƒ½é—®é¢˜

**æ€§èƒ½ä¼˜åŒ–è¯„åˆ†**: â­â­â­â­â­ (5/5)

### ä»»åŠ¡ 8ï¼šæ–‡æ¡£ä¸æµ‹è¯•

**å®Œæˆå†…å®¹**:
1. âœ… **ç»„ä»¶ä½¿ç”¨æ–‡æ¡£**
   - æ‰€æœ‰ç»„ä»¶åŒ…å«è¯¦ç»†çš„ JSDoc æ³¨é‡Š
   - æä¾›ä½¿ç”¨ç¤ºä¾‹ï¼ˆ`@example` æ ‡ç­¾ï¼‰
   - æ¥å£å®šä¹‰æ¸…æ™°ï¼ˆTypeScript ç±»å‹æ³¨é‡Šï¼‰

2. âœ… **è®¾å¤‡ç›‘æ§é¡µæ¨¡æ¿å¤ç”¨æŒ‡å—**
   - åˆ›å»º `COMPONENT_REUSE_GUIDE.md`ï¼ˆå®Œæ•´æ–‡æ¡£ï¼‰
   - è¯´æ˜å•è®¾å¤‡é¡µé¢çš„å¤ç”¨æ­¥éª¤ï¼ˆ5 åˆ†é’Ÿå¿«é€Ÿå¤ç”¨ï¼‰
   - è¯´æ˜å¤šè®¾å¤‡é¡µé¢çš„å®ç°æ–¹æ³•ï¼ˆ10 åˆ†é’Ÿå®ç°ï¼‰
   - æä¾›æ¨è¿›ç³»ç»Ÿå·¦å³åˆ†æ å¸ƒå±€çš„å®Œæ•´ç¤ºä¾‹ä»£ç 
   - åŒ…å«æœ€ä½³å®è·µã€å¸¸è§é—®é¢˜å’Œå¤ç”¨æ¸…å•

3. âœ… **ä»£ç å†…æ³¨é‡Š**
   - æ‰€æœ‰ç»„ä»¶å’Œå‡½æ•°åŒ…å«ä¸­æ–‡æ³¨é‡Š
   - å…³é”®é€»è¾‘å—æ·»åŠ è¯´æ˜æ³¨é‡Š
   - å¤æ‚ç®—æ³•æ·»åŠ é€è¡Œè§£é‡Š

**æ–‡æ¡£å®Œæ•´æ€§è¯„åˆ†**: â­â­â­â­â­ (5/5)

### ä»»åŠ¡ 9ï¼šä»£ç å®¡æŸ¥ä¸ä¼˜åŒ–

**å®¡æŸ¥ç»“æœ**:
1. âœ… **ä»£ç è§„èŒƒæ€§**
   - éµå¾ª TypeScript æœ€ä½³å®è·µ
   - ä½¿ç”¨ ESLint å’Œ Prettier æ ¼å¼åŒ–
   - ç»„ä»¶å‘½åæ¸…æ™°ã€ä¸€è‡´
   - æ–‡ä»¶ç»“æ„åˆç†

2. âœ… **ç±»å‹å®‰å…¨**
   - æ‰€æœ‰ç»„ä»¶ä½¿ç”¨ TypeScript ç±»å‹å®šä¹‰
   - Props æ¥å£å®šä¹‰å®Œæ•´
   - å›¾æ ‡æ˜ å°„ä½¿ç”¨ç±»å‹å®‰å…¨çš„ `IconComponent` ç±»å‹

3. âœ… **å†…å­˜æ³„æ¼æ£€æŸ¥**
   - `useEffect` cleanup å‡½æ•°æ­£ç¡®å®ç°
   - å–æ¶ˆè®¢é˜…é€»è¾‘å®Œæ•´
   - äº‹ä»¶ç›‘å¬å™¨æ­£ç¡®æ¸…ç†
   - æ— æ½œåœ¨çš„å†…å­˜æ³„æ¼é£é™©

4. âœ… **ä»£ç å¤ç”¨æ€§**
   - ç»„ä»¶é«˜åº¦å¯å¤ç”¨ï¼ˆé€šè¿‡ `equipmentId` å‚æ•°ï¼‰
   - æ¥å£è®¾è®¡æ”¯æŒå¤šç§ä½¿ç”¨åœºæ™¯
   - è‰¯å¥½çš„æŠ½è±¡å’Œå°è£…

5. âš ï¸ **å¾…ä¼˜åŒ–é¡¹**
   - å¼€å‘ç¯å¢ƒçš„ `console.log` è¯­å¥è¾ƒå¤šï¼ˆæœ‰åŠ©äºè°ƒè¯•ï¼Œä½†ç”Ÿäº§ç¯å¢ƒåº”ç§»é™¤ï¼‰
   - å¯è€ƒè™‘æ·»åŠ å•å…ƒæµ‹è¯•ï¼ˆå½“å‰ä¸ºå¯é€‰é¡¹ï¼‰

**ä»£ç è´¨é‡è¯„åˆ†**: â­â­â­â­Â½ (4.5/5)

---

## ğŸ¯ æˆæœæ€»ç»“

### æ–°åˆ›å»ºçš„æ–‡ä»¶
1. `src/components/monitoring/MonitoringWall.tsx` (394 è¡Œ)
2. `src/components/monitoring/DedicatedAlarmZone.tsx` (357 è¡Œ)
3. `src/components/BatteryMonitoringPage.tsx` (327 è¡Œï¼Œå®Œå…¨é‡æ„)
4. `openspec/changes/refactor-battery-monitoring-page/COMPONENT_REUSE_GUIDE.md` (å®Œæ•´çš„ç»„ä»¶å¤ç”¨æŒ‡å—)

### ä¿®æ”¹çš„æ–‡ä»¶
1. `src/config/navigation.ts` (æ›´æ–°ç”µæ± ç›‘æ§å¯¼èˆªé¡¹)
2. `src/components/MainLayout.tsx` (æ›´æ–°è·¯ç”±æ˜ å°„è¡¨)
3. `src/components/visualization/icons/icon-mapping.ts` (æ–°å¢ 10 ä¸ªç›‘æµ‹ç‚¹çš„å›¾æ ‡æ˜ å°„)

### å¤‡ä»½çš„æ–‡ä»¶
- `src/components/BatteryMonitoringPage.tsx.old` (æ—§ç‰ˆæœ¬ï¼Œ1503 è¡Œ)

### ä»£ç è´¨é‡
- âœ… æ‰€æœ‰ä»£ç åŒ…å«è¯¦ç»†çš„ä¸­æ–‡æ³¨é‡Š
- âœ… éµå¾ª TypeScript æœ€ä½³å®è·µ
- âœ… ä½¿ç”¨ React 18 æ–°ç‰¹æ€§ï¼ˆå¦‚ `useMemo` ä¼˜åŒ–ï¼‰
- âœ… éµå¾ª Zustand çŠ¶æ€ç®¡ç†æœ€ä½³å®è·µ
- âœ… ç»„ä»¶æ¥å£è®¾è®¡å…·æœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§

---

**å®æ–½å®Œæˆæ—¶é—´**: 2025-01-14  
**OpenSpec ææ¡ˆ**: refactor-battery-monitoring-page  
**å®æ–½çŠ¶æ€**: æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆï¼Œç­‰å¾…è¿è¡Œç¯å¢ƒéªŒè¯
