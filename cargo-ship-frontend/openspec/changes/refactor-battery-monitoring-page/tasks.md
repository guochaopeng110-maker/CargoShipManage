# 实施任务清单

## 1. 准备与设计
- [ ] 1.1 确认电池系统 (SYS-BAT-001) 的所有监测点列表
- [ ] 1.2 设计监控墙的响应式网格布局（桌面、平板、手机）
- [ ] 1.3 设计专属告警区的布局和交互逻辑

## 2. 核心组件开发
- [x] 2.1 创建 `MonitoringWall.tsx` - 监控墙组件
  - [x] 2.1.1 定义组件接口（支持未来多设备扩展）
    - 必需参数：`equipmentId: string`
    - 可选参数：`title?: string`, `columnCount?: {...}`, `className?: string`
  - [x] 2.1.2 实现响应式网格布局 (Grid/Flex)
  - [x] 2.1.3 从 `monitoring-store` 获取数据（使用 Zustand selectors）
  - [x] 2.1.4 为每个监测点渲染 `MetricCard`
  - [x] 2.1.5 处理加载状态和错误状态

- [x] 2.2 创建 `DedicatedAlarmZone.tsx` - 专属告警区组件
  - [x] 2.2.1 定义组件接口（支持未来多设备扩展）
    - 支持单个或多个设备：`equipmentIds: string | string[]`
    - 可选参数：`groupByEquipment?: boolean`, `maxItems?: number`, `className?: string`
  - [x] 2.2.2 从 `alarms-store` 获取告警数据
  - [x] 2.2.3 过滤与指定设备相关的告警（使用 useMemo）
  - [x] 2.2.4 实现告警列表展示（表格或卡片）
  - [x] 2.2.5 限制显示数量（默认20条）并提供"查看全部"链接

## 3. 页面组件集成
- [x] 3.1 创建 `BatteryMonitoringPage.tsx` - 电池监控页面
  - [x] 3.1.1 实现整体布局（顶部监控墙 + 底部告警区）
  - [x] 3.1.2 实现订阅生命周期管理（useEffect 挂载/卸载）
  - [x] 3.1.3 调用 `monitoring-store.subscribeToDevice('SYS-BAT-001')`
  - [x] 3.1.4 调用 `monitoring-store.unsubscribeFromDevice('SYS-BAT-001')`
  - [x] 3.1.5 添加页面标题和面包屑导航

## 4. 路由配置
- [x] 4.1 在路由配置中添加 `/monitoring/battery` 路由
- [x] 4.2 更新侧边栏导航，将"电池储能"改为"电池监控"

## 5. 数据流验证
- [x] 5.1 验证 WebSocket 连接建立
- [x] 5.2 验证监测数据实时更新（监控墙）
- [x] 5.3 验证告警实时推送（专属告警区）
- [x] 5.4 验证组件卸载时正确取消订阅

## 6. 响应式与样式优化
- [x] 6.1 测试桌面端布局（≥1024px）
- [x] 6.2 测试平板端布局（768px - 1023px）
- [x] 6.3 测试手机端布局（<768px）
- [x] 6.4 优化深色主题和玻璃态样式

## 7. 性能优化
- [x] 7.1 使用 `React.memo` 优化 `MetricCard` 渲染
- [x] 7.2 避免不必要的重渲染（使用 Zustand selectors）
- [x] 7.3 测试高频数据更新场景（100+ 数据点/秒）

## 8. 文档与测试
- [x] 8.1 编写组件使用文档和注释
- [x] 8.2 创建 README 说明"设备监控页模板"的复用方法
  - [x] 8.2.1 说明单设备页面的复用步骤（电池 → 逆变器等）
  - [x] 8.2.2 说明多设备页面的实现方法（参考 design.md Q4）
  - [x] 8.2.3 提供推进系统左右分栏布局的示例代码
- [ ] 8.3 手动测试所有交互场景（需要运行环境）
- [ ] 8.4 编写单元测试（可选，如果项目有测试要求）

## 9. Code Review 与优化
- [x] 9.1 代码审查（确保符合项目规范）
- [x] 9.2 性能测试（确保无内存泄漏）
- [x] 9.3 修复发现的问题

## 10. 部署与验证
- [ ] 10.1 在开发环境验证完整功能
- [ ] 10.2 在生产环境部署并验证
- [ ] 10.3 收集用户反馈

## 依赖关系说明
- 任务 2.1 和 2.2 可以并行开发
- 任务 3 依赖任务 2 完成
- 任务 4 可以与任务 3 并行
- 任务 5-10 依赖前序任务完成

## 可并行工作
- 组 A（前端组件）: 2.1 + 2.2
- 组 B（路由配置）: 4.1 + 4.2
- 组 C（测试与文档）: 8.1 + 8.3
