# 数据查询页面使用指南

> **版本**: 2.0.0
> **更新日期**: 2025-12-14
> **作者**: 货船智能机舱管理系统开发团队

## 概述

数据查询页面是一个简洁高效的工具，专注于查询和导出设备历史运行数据。新版本完全重构，移除了复杂的图表和多余功能，提供更直观的查询体验。

## 主要功能

### 1. 数据查询

#### 查询步骤

1. **选择设备**
   - 点击"设备选择"下拉框
   - 从列表中选择要查询的设备
   - 支持的设备类型：
     - 🔋 电池系统
     - ⚡ 推进系统
     - 🔌 逆变器系统
     - ⚙️ 辅助设备
     - 🔩 电机系统
     - 💧 泵系统

2. **选择监控参数**
   - 点击参数按钮进行多选
   - 支持的参数类型：
     - 电压 (V)
     - 电流 (A)
     - 温度 (°C)
     - 转速 (rpm)
     - SOC (%)
     - 压力 (bar)
     - 功率 (kW)
     - 效率 (%)
   - 已选择的参数会高亮显示
   - 可以选择多个参数同时查询

3. **选择时间范围**
   - 点击日期范围选择器
   - 使用快捷选项快速选择：
     - 最近7天
     - 最近30天
     - 本月
     - 上月
   - 或手动选择起止日期

4. **执行查询**
   - 点击"执行查询"按钮
   - 或按 `Enter` 键快速执行
   - 等待数据加载完成

### 2. 查看结果

#### 桌面端

- 数据以表格形式展示
- 表格列包括：
  - 时间
  - 设备
  - 参数
  - 数值
  - 状态（正常/警告/严重/离线）
  - 质量
- 鼠标悬停行会高亮显示
- 状态以彩色徽章形式展示

#### 移动端

- 数据以卡片形式展示
- 每条数据独立卡片
- 触摸友好的交互设计
- 自适应屏幕尺寸

### 3. 分页浏览

- 查询结果支持分页显示
- 默认每页显示 20 条数据
- 分页控件功能：
  - 上一页/下一页按钮
  - 页码直接跳转
  - 显示当前页/总页数
  - 显示数据总数和当前范围

### 4. 数据导出

#### 导出格式

支持三种导出格式：

1. **Excel** (.xlsx)
   - 适合在 Excel 中进行进一步分析
   - 保留完整的数据结构
   - 包含格式化的时间戳

2. **CSV** (.csv)
   - 通用的逗号分隔值格式
   - 兼容各种数据分析工具
   - 文件体积小

3. **JSON** (.json)
   - 适合程序化处理
   - 保留完整的数据类型
   - 易于集成到其他系统

#### 导出步骤

1. 先执行查询获取数据
2. 点击对应格式的导出按钮
3. 浏览器会自动下载文件
4. 文件名格式：`monitoring_data_[时间戳].[格式]`

## 快捷键

为了提高操作效率，页面支持以下快捷键：

| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Enter` | 执行查询 | 在非输入框焦点时有效 |
| `Esc` | 清除错误提示 | 关闭所有错误通知 |
| `←` | 上一页 | 在非输入框焦点时有效 |
| `→` | 下一页 | 在非输入框焦点时有效 |
| `Ctrl+K` (或 `Cmd+K`) | 显示/隐藏快捷键提示 | 随时可用 |

**提示**: 点击页面右上角的"⌨️ 快捷键"按钮可以查看完整的快捷键列表。

## 状态说明

### 数据状态

查询结果中每条数据都有状态标识：

- 🟢 **正常** - 数据在正常范围内
- 🟡 **警告** - 数据超出正常范围但未达到严重级别
- 🔴 **严重** - 数据严重超出正常范围
- ⚫ **离线** - 设备离线或无数据

### 数据质量

- **normal** - 正常质量数据
- **estimated** - 估算数据
- **questionable** - 可疑数据
- **bad** - 质量差的数据

## 常见问题

### 1. 查询无结果怎么办？

**可能原因**：
- 所选时间范围内没有数据
- 设备在该时间段离线
- 所选参数未被该设备记录

**解决方法**：
- 扩大时间范围
- 选择其他设备或参数
- 检查设备连接状态

### 2. 导出失败怎么办？

**可能原因**：
- 没有执行查询就尝试导出
- 网络连接问题
- 浏览器阻止了下载

**解决方法**：
- 先执行查询获取数据
- 检查网络连接
- 允许浏览器下载文件

### 3. 页面加载慢怎么办？

**可能原因**：
- 查询时间范围过大
- 选择了过多参数
- 网络速度慢

**解决方法**：
- 缩小时间范围
- 减少同时查询的参数数量
- 检查网络连接

### 4. 快捷键不工作？

**可能原因**：
- 当前焦点在输入框中
- 浏览器快捷键冲突

**解决方法**：
- 点击页面其他位置取消输入框焦点
- 检查浏览器是否有相同的快捷键设置

## 与旧版本的区别

### 移除的功能

以下功能已从新版本中移除：

- ❌ 数据可视化图表（折线图、柱状图、饼图）
- ❌ 多个 Tabs 切换（图表、表格、统计、历史）
- ❌ 高级选项（时间粒度、聚合类型）
- ❌ 复杂的查询历史管理

**原因**: 这些功能将在专门的数据分析页面实现，保持本页面的简洁性。

### 新增的功能

- ✅ 快捷键支持
- ✅ 响应式设计（移动端优化）
- ✅ 更清晰的状态展示
- ✅ 优化的分页体验
- ✅ 快捷时间范围选择

### 优化的体验

- 更快的页面加载速度
- 更简洁的用户界面
- 更直观的操作流程
- 更好的错误提示

## 最佳实践

### 高效查询

1. **使用快捷时间范围**
   - 对于常见查询，使用"最近7天"、"最近30天"等快捷选项
   - 避免手动选择日期

2. **合理选择参数**
   - 只选择需要的参数，避免查询过多数据
   - 相关参数可以一次性查询

3. **利用快捷键**
   - 熟练使用 `Enter` 键执行查询
   - 使用方向键快速翻页

### 数据导出

1. **选择合适的格式**
   - Excel: 需要进一步分析和处理
   - CSV: 需要导入其他工具
   - JSON: 程序化处理或 API 集成

2. **控制数据量**
   - 大量数据建议分批导出
   - 每次导出前检查数据总数

## 技术支持

如遇到问题或需要帮助，请联系技术支持团队。

---

**提示**: 本文档会随着系统更新而更新，请定期查看最新版本。
