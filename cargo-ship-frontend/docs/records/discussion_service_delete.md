åŸºäºæ–¹æ¡ˆ Aï¼Œæˆ‘å»ºè®®åœ¨ææ¡ˆçš„ tasks.md ä¸­æ·»åŠ ä»¥ä¸‹ä»»åŠ¡ï¼š
### 2.6 Service å±‚æ¸…ç†ä¸é‡æ„

#### 2.6.1 åˆ é™¤å†—ä½™ Service æ–‡ä»¶
- [ ] 2.6.1.1 æ›´æ–° `alarms-store.ts`ï¼Œæ”¹ä¸ºç›´æ¥ä½¿ç”¨ `AlarmsService` from `@/services/api`
- [ ] 2.6.1.2 åˆ é™¤ `src/services/alarms-service.ts` (1,236 è¡Œ)
- [ ] 2.6.1.3 æ›´æ–° `equipment-store.ts`ï¼Œæ”¹ä¸ºç›´æ¥ä½¿ç”¨ `EquipmentService` from `@/services/api`
- [ ] 2.6.1.4 åˆ é™¤ `src/services/equipment-service.ts` (964 è¡Œ)
- [ ] 2.6.1.5 æ›´æ–° `threshold-store.ts`ï¼Œæ”¹ä¸ºç›´æ¥ä½¿ç”¨ `ThresholdService` from `@/services/api`
- [ ] 2.6.1.6 åˆ é™¤ `src/services/threshold-service.ts` (348 è¡Œ)
- [ ] 2.6.1.7 æ›´æ–° `import-store.ts`ï¼Œæ”¹ä¸ºç›´æ¥ä½¿ç”¨ `ImportService` from `@/services/api`
- [ ] 2.6.1.8 åˆ é™¤ `src/services/import-service.ts` (701 è¡Œ)
- [ ] 2.6.1.9 ç¡®è®¤ `historical-data-service.ts` çš„ä½¿ç”¨æƒ…å†µ
- [ ] 2.6.1.10 å¦‚æœªä½¿ç”¨ï¼Œåˆ é™¤ `src/services/historical-data-service.ts` (505 è¡Œ)
- [ ] 2.6.1.11 åˆ é™¤ `src/services/api-client.ts` (627 è¡Œ)

#### 2.6.2 é‡æ„ä¿ç•™çš„ Service æ–‡ä»¶
- [ ] 2.6.2.1 é‡æ„ `auth-service.ts`ï¼šç§»é™¤æ‰‹åŠ¨ç±»å‹ï¼Œä½¿ç”¨ `@/services/api` ç±»å‹
- [ ] 2.6.2.2 é‡æ„ `health-service.ts`ï¼šç§»é™¤æ‰‹åŠ¨ç±»å‹ï¼Œä½¿ç”¨ `@/services/api` ç±»å‹
- [ ] 2.6.2.3 é‡æ„ `reports-service.ts`ï¼šç§»é™¤æ‰‹åŠ¨ç±»å‹ï¼Œä½¿ç”¨ `@/services/api` ç±»å‹
- [ ] 2.6.2.4 ç²¾ç®€è¿™äº› serviceï¼Œåªä¿ç•™å¿…è¦çš„ä¸šåŠ¡é€»è¾‘ï¼ˆä¸é‡å¤ API åŠŸèƒ½ï¼‰

#### 2.6.3 éªŒè¯
- [ ] 2.6.3.1 éªŒè¯æ‰€æœ‰ Stores æ­£å¸¸å·¥ä½œ
- [ ] 2.6.3.2 éªŒè¯è®¤è¯æµç¨‹æ­£å¸¸
- [ ] 2.6.3.3 éªŒè¯å¥åº·è¯„ä¼°åŠŸèƒ½æ­£å¸¸
- [ ] 2.6.3.4 éªŒè¯æŠ¥å‘Šç”ŸæˆåŠŸèƒ½æ­£å¸¸

æ•°æ®æµå¯¹æ¯”åˆ†æ
ğŸ”´ å½“å‰æ¶æ„ï¼ˆä¸‰å±‚ï¼Œæœ‰å†—ä½™ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é¡µé¢ç»„ä»¶ (Page Component)                 â”‚
â”‚         ä¾‹å¦‚: AlarmCenterPage.tsx                â”‚
â”‚         - ä¸ç›´æ¥è°ƒç”¨ API                         â”‚
â”‚         - åªè®¢é˜… Store                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨ actions
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Zustand Store (alarms-store.ts)         â”‚
â”‚         - ç®¡ç†çŠ¶æ€ (items, loading, error)       â”‚
â”‚         - æä¾› actions (fetchAlarms, etc.)      â”‚
â”‚         - è°ƒç”¨ Service å±‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨ enhancedAlarmsService
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      Service å±‚ (alarms-service.ts)             â”‚  â† ğŸ”´ å†—ä½™å±‚
â”‚      1,236 è¡Œä»£ç                                 â”‚
â”‚      - ä½¿ç”¨æ‰‹åŠ¨ç±»å‹ from '../types/alarms'       â”‚
â”‚      - åŒ…è£… apiClient è°ƒç”¨                       â”‚
â”‚      - æ·»åŠ ä¸šåŠ¡é€»è¾‘ï¼ˆå¤§éƒ¨åˆ†æ˜¯é‡å¤çš„ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨ apiClient
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      API Client åŒ…è£…å™¨ (api-client.ts)          â”‚  â† ğŸ”´ å†—ä½™å±‚
â”‚      627 è¡Œä»£ç                                   â”‚
â”‚      - è®¤è¯ã€é‡è¯•ã€é”™è¯¯å¤„ç†                       â”‚
â”‚      - ä½¿ç”¨ OpenAPI é…ç½®                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨è‡ªåŠ¨ç”Ÿæˆçš„ API
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Auto-generated API (Service.ts)               â”‚  â† âœ… çœŸæ­£çš„ API
â”‚   - alarmControllerFindAllAlarms()              â”‚
â”‚   - alarmControllerUpdateAlarmStatus()          â”‚
â”‚   - åŒ…å«æ‰€æœ‰ç±»å‹å®šä¹‰                             â”‚
â”‚   - å·²ç»æœ‰é”™è¯¯å¤„ç†                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP è¯·æ±‚
                   â†“
              [ åç«¯ API ]
âœ… æ–¹æ¡ˆA æ¶æ„ï¼ˆä¸¤å±‚ï¼Œç²¾ç®€é«˜æ•ˆï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         é¡µé¢ç»„ä»¶ (Page Component)                 â”‚
â”‚         ä¾‹å¦‚: AlarmCenterPage.tsx                â”‚
â”‚         - ä¸ç›´æ¥è°ƒç”¨ API                         â”‚
â”‚         - åªè®¢é˜… Store                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ è°ƒç”¨ actions
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Zustand Store (alarms-store.ts)         â”‚
â”‚         - ç®¡ç†çŠ¶æ€ (items, loading, error)       â”‚
â”‚         - æä¾› actions (fetchAlarms, etc.)      â”‚
â”‚         - ç›´æ¥è°ƒç”¨ Auto-generated API           â”‚  â† âœ… ç›´æ¥è°ƒç”¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ ç›´æ¥è°ƒç”¨ Service.alarmControllerXXX()
                   â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Auto-generated API (Service.ts)               â”‚  â† âœ… å”¯ä¸€çš„ API å±‚
â”‚   - alarmControllerFindAllAlarms()              â”‚
â”‚   - alarmControllerUpdateAlarmStatus()          â”‚
â”‚   - alarmControllerFindOneAlarm()               â”‚
â”‚   - åŒ…å«æ‰€æœ‰ç±»å‹å®šä¹‰                             â”‚
â”‚   - å·²ç»æœ‰é”™è¯¯å¤„ç†ã€å–æ¶ˆè¯·æ±‚ç­‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚ HTTP è¯·æ±‚
                   â†“
              [ åç«¯ API ]

ğŸ’» å…·ä½“ä»£ç ç¤ºä¾‹å¯¹æ¯”
ç¤ºä¾‹ 1: å‘Šè­¦åˆ—è¡¨æŸ¥è¯¢
ğŸ”´ å½“å‰ä»£ç ï¼ˆä¸‰å±‚ï¼‰
// 1. Store (alarms-store.ts) - ç¬¬ä¸€å±‚
import { enhancedAlarmsService } from '../services/alarms-service';
import { Alarm } from '../types/alarms'; // æ‰‹åŠ¨ç±»å‹

export const useAlarmsStore = create<AlarmsStore>((set, get) => ({
  items: [],
  loading: false,
  
  fetchAlarms: async (filters) => {
    set({ loading: true, error: null });
    try {
      // è°ƒç”¨ Service å±‚
      const response = await enhancedAlarmsService.getAlarms({
        page: get().page,
        pageSize: get().pageSize,
        ...filters
      });
      set({ items: response.data, total: response.total });
    } catch (error) {
      set({ error: error.message });
    } finally {
      set({ loading: false });
    }
  }
}));

// 2. Service å±‚ (alarms-service.ts) - ç¬¬äºŒå±‚ï¼ˆ1,236è¡Œï¼‰
import { apiClient } from './api-client';
import { Alarm } from '../types/alarms'; // æ‰‹åŠ¨ç±»å‹ï¼Œä¸ API ç±»å‹å†—ä½™

export const enhancedAlarmsService = {
  async getAlarms(params) {
    // åŒ…è£… apiClient è°ƒç”¨
    const response = await apiClient.request<any>({
      method: 'GET',
      url: '/api/alarms',
      params: {
        page: params.page,
        limit: params.pageSize,
        // ... å„ç§å‚æ•°è½¬æ¢
      }
    });
    
    // å¤§é‡çš„ä¸šåŠ¡é€»è¾‘ã€æ•°æ®è½¬æ¢ç­‰ï¼ˆå¤§éƒ¨åˆ†æ˜¯é‡å¤çš„ï¼‰
    return {
      data: response.data.items,
      total: response.data.total,
      // ...
    };
  }
};

// 3. API Client åŒ…è£…å™¨ (api-client.ts) - ç¬¬ä¸‰å±‚ï¼ˆ627è¡Œï¼‰
export const apiClient = {
  async request(config) {
    // è®¤è¯ã€é‡è¯•ã€é”™è¯¯å¤„ç†ç­‰
    // ...
    return fetch(/* ... */);
  }
};

// 4. è‡ªåŠ¨ç”Ÿæˆçš„ API (æœ€ç»ˆè¢«è°ƒç”¨)
// Service.ts
âœ… æ–¹æ¡ˆA ä»£ç ï¼ˆä¸¤å±‚ï¼‰
// 1. Store (alarms-store.ts) - ç›´æ¥è°ƒç”¨ API
import { Service } from '../services/api';  // è‡ªåŠ¨ç”Ÿæˆçš„ API
import { AlarmRecord } from '../services/api';  // è‡ªåŠ¨ç”Ÿæˆçš„ç±»å‹

export const useAlarmsStore = create<AlarmsStore>((set, get) => ({
  items: [],
  loading: false,
  
  fetchAlarms: async (filters) => {
    set({ loading: true, error: null });
    try {
      // ç›´æ¥è°ƒç”¨è‡ªåŠ¨ç”Ÿæˆçš„ APIï¼ˆä¸€æ­¥åˆ°ä½ï¼ï¼‰
      const response = await Service.alarmControllerFindAllAlarms(
        get().page,           // page
        get().pageSize,       // limit
        filters.severity,     // severity
        filters.status,       // status
        filters.equipmentId,  // equipmentId
        filters.startDate,    // startDate
        filters.endDate       // endDate
      );
      
      set({ 
        items: response.items,  // ç±»å‹å®‰å…¨ï¼Œè‡ªåŠ¨æç¤º
        total: response.total 
      });
    } catch (error) {
      set({ error: error.message });
    } finally {
      set({ loading: false });
    }
  }
}));

// 2. è‡ªåŠ¨ç”Ÿæˆçš„ API (Service.ts) - ç›´æ¥ä½¿ç”¨ï¼Œæ— éœ€é¢å¤–å±‚
// å·²åŒ…å«ï¼š
// - ç±»å‹å®šä¹‰ âœ…
// - é”™è¯¯å¤„ç† âœ…
// - è¯·æ±‚å–æ¶ˆ âœ…
// - API æ–‡æ¡£æ³¨é‡Š âœ…
ç¤ºä¾‹ 2: è®¾å¤‡ç®¡ç†
âœ… æ–¹æ¡ˆA ä»£ç 
// equipment-store.ts
import { Service, Equipment, CreateEquipmentDto } from '../services/api';

export const useEquipmentStore = create<EquipmentStore>((set) => ({
  equipments: [],
  
  // è·å–åˆ—è¡¨
  fetchEquipments: async (page, limit, filters) => {
    const response = await Service.equipmentControllerFindAll(
      page,
      limit,
      filters.deviceType,
      filters.status,
      filters.keyword
    );
    set({ equipments: response.items });
  },
  
  // åˆ›å»ºè®¾å¤‡
  createEquipment: async (data: CreateEquipmentDto) => {
    const newEquipment = await Service.equipmentControllerCreate(data);
    set((state) => ({ equipments: [...state.equipments, newEquipment] }));
  },
  
  // æ›´æ–°è®¾å¤‡
  updateEquipment: async (id: string, data) => {
    await Service.equipmentControllerUpdate(id, data);
    // åˆ·æ–°åˆ—è¡¨
  },
  
  // åˆ é™¤è®¾å¤‡
  deleteEquipment: async (id: string) => {
    await Service.equipmentControllerRemove(id);
    // åˆ·æ–°åˆ—è¡¨
  }
}));
